<div class="modal fade" id="modal-add-question" tabindex="-1" role="dialog" aria-labelledby="modal-add-question"
     aria-hidden="true">
    <div class="modal-dialog  modal-lg" role="document">
        <div class="modal-content">
            <ul class="nav nav-tabs nav-tabs-alt mb-1" role="tablist">
                <li class="nav-item">
                    <button class="nav-link active" id="btabs-alt-static-home-tab" data-bs-toggle="tab"
                            data-bs-target="#btabs-alt-static-home" role="tab" aria-controls="btabs-alt-static-home"
                            aria-selected="true"
                            x-text="_modalSetting.title">
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="btabs-alt-static-profile-tab" data-bs-toggle="tab"
                            data-bs-target="#btabs-alt-static-profile" role="tab" aria-controls="btabs-alt-static-profile"
                            aria-selected="false">
                        Thêm từ file
                    </button>
                </li>
                <li class="nav-item ms-auto">
                    <button type="button" class="btn btn-close p-3" data-bs-dismiss="modal" aria-label="Close"></button>
                </li>
            </ul>
            <div class="modal-body block block-transparent bg-white mb-0 block-rounded">
                <div class="block-content tab-content">
                    <div class="tab-pane active" id="btabs-alt-static-home" role="tabpanel"
                         aria-labelledby="btabs-static-home-tab" tabindex="0">
                        <form id="form_add_question">
                            <input type="hidden" x-model="_updinData.id" name="id">
                            <div class="mb-4">
                                <div class="row">
                                    <div class="col-4">
                                        <label class="form-label">Môn học</label>
                                        <select class="form-select"
                                                x-model="_updinData.subjectId"
                                                id="mon-hoc"
                                                name="chuong"
                                                @@change="LoadChapter()" style="width: 100%;">
                                            <option value="" x-text="_updinData.subjectName" disabled selected>Choose one...</option>
                                            <template x-for="item in _listSubject">
                                                <option :value="item.id" x-text="item.subjectName"></option>
                                            </template>
                                        </select>
                                    </div>
                                    <div class="col-4">
                                        <label class="form-label">Chương</label>
                                        <select class="form-select"
                                                x-model="_updinData.chapterId"
                                                style="width: 100%;"
                                                id="chuong"
                                                name="chuong">
                                            <option value="" x-text="_updinData.chapterName" disabled selected>Choose one...</option>
                                            <template x-for="item in _listChapter">
                                                <option :value="item.id" x-text="item.chapterName"></option>
                                            </template>
                                        </select>

                                    </div>
                                    <div class="col-4">
                                        <label class="form-label">Độ khó</label>
                                        <select class="form-select" x-model="_updinData.level" name="level"
                                                style="width: 100%;" data-placeholder="Choose one..">
                                            <option></option>
                                            <option value="1">Cơ bản</option>
                                            <option value="2">Trung bình</option>
                                            <option value="3">Nâng cao</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <label class="form-label" for="js-ckeditor">Nội dung câu hỏi</label>
                                <textarea id="js-ckeditor" name="js-ckeditor" x-model="_updinData.content"></textarea>
                            </div>

                            <div class="mb-4 row">
                                <h6>Danh sách đáp án</h6>
                                <div class="table-responsive">
                                    <table class="table table-vcenter">
                                        <tbody>
                                            <template x-for="(item, index) in _updinData.options">
                                                <tr>
                                                    <td class="text-center" scope="row" x-text="item.rowIndex"></td>
                                                    <td x-html="item.answersContent"> </td>
                                                    <td class="d-none d-sm-table-cell">
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio"
                                                                   name="da-dung"
                                                                   :id="'da-' + item.rowIndex"
                                                                   :value="item.rowIndex"
                                                                   x-model="item.status"
                                                                   x-bind:checked="item.status">
                                                            <label class="form-check-label" x-model="item.id">
                                                                đáp án đúng
                                                            </label>
                                                        </div>
                                                    </td>

                                                    <td class="text-center">
                                                        <div class="btn-group">
                                                            <button type="button" class="btn btn-sm btn-alt-secondary btn-edit-option"
                                                                    title="edit"
                                                                    x-on:click="EditAnswer(index)">
                                                                <i class="ri-edit-2-line"></i>

                                                            </button>
                                                            <button type="button" class="btn btn-sm btn-alt-secondary btn-delete-option"
                                                                    title="delete"
                                                                    x-on:click="DeleteAnswer(index)">
                                                                <i class="ri-delete-bin-line"></i>
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>
                                <p>
                                    <button class="btn btn-hero btn-primary" type="button"
                                            x-on:click="OpenAddAnswer()">
                                        Thêm câu trả lời
                                        <i class="fa fa-fw fa-angle-down opacity-50"></i>
                                    </button>
                                </p>
                                <div :class="open ? 'collapse show': 'collapse'" id="add_option">
                                    <div class="card card-body">
                                        <input type="hidden" x-model="_answer.id" name="id">
                                        <label class="form-label" for="option-content">Nội dung trả lời</label>
                                        <textarea id="option-content" name="option-content" x-model="_answer.content"></textarea>
                                        <div class="form-check mt-4">
                                            <input class="form-check-input" x-model="_answer.status"
                                                   type="checkbox" value="" id="true-option">
                                            <label class="form-check-label" for="true-option">
                                                Đáp án đúng
                                            </label>
                                        </div>
                                        <p>
                                            <button type="button" class="btn btn-primary mt-3"
                                                    x-on:click="AddOrEditAnswer()">
                                                Lưu đáp án
                                            </button>

                                            <button type="button" class="btn btn-danger mt-3" x-on:click="CloseAnswer()">
                                                Huỷ
                                            </button>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <button type="button" class="btn btn-soft-primary"
                                        x-on:click="SaveQuestion()">
                                    <i class="ri-add-line align-bottom me-1"></i>
                                    Lưu câu hỏi
                                </button>
                            </div>
                        </form>
                    </div>
                    <!--Thêm bằng Word or Ex-->
                    <div class="tab-pane" id="btabs-alt-static-profile" role="tabpanel"
                         aria-labelledby="btabs-static-profile-tab" tabindex="0">
                        <form id="form-add-doc">
                            <div class="mb-4">
                                <div class="row">
                                    <div class="col-6">
                                        <label class="form-label">Môn học</label>
                                        <select class="form-select"
                                                x-model="_updinData.subjectId"
                                                id="monhocfile"
                                                @@change="LoadChapter()" style="width: 100%;">
                                            <option value="" disabled selected>Choose one...</option>
                                            <template x-for="item in _listSubject">
                                                <option :value="item.id" x-text="item.subjectName"></option>
                                            </template>
                                        </select>
                                    </div>
                                    <div class="col-6">
                                        <label class="form-label">Chương</label>
                                        <select class="form-select"
                                                x-model="_updinData.chapterId"
                                                style="width: 100%;"
                                                id="chuongfile">
                                            <option value="" disabled selected>Choose one...</option>
                                            <template x-for="item in _listChapter">
                                                <option :value="item.id" x-text="item.chapterName"></option>
                                            </template>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <label class="form-label" for="file-cau-hoi">Nội dung</label>
                                <input class="form-control" type="file" id="file-cau-hoi"
                                       accept=".docx" required
                                       @@change="handleFile" />
                            </div>
                            <div class="mb-4">
                                <em>
                                    Vui lòng soạn câu hỏi theo đúng định dạng.
                                    <a href="~/template/mau_import_cau_hoi.docx">Tải về file mẫu Docx</a>
                                </em>
                            </div>
                            <div class="mb-4 d-flex justify-content-between">
                                <button type="button" class="btn btn-hero btn-primary"
                                        x-on:click="ImportFileWord()">
                                    <i class="fa fa-cloud-arrow-up"></i> Thêm vào hệ thống
                                </button>
                            </div>
                        </form>


                        <div id="content-file">
                            <div class="question rounded border mb-3">
                                <template x-for="(question, index) in _listContentFile">
                                    <div class="question-top p-3">
                                        <div class="fw-bold mb-3 d-flex">
                                            <b x-text="index + 1"></b>.
                                            <span x-text="question.content"></span>
                                        </div>
                                        <div class="row">
                                            <template x-for="(answer, index) in question.answers">
                                                <div :class="answer.status ? 'col-6 mb-1 text-primary' : 'col-6 mb-1' ">
                                                    <p class="mb-1" >
                                                        <b x-text="String.fromCharCode(64 + index + 1)">
                                                        </b>
                                                        <span x-text="answer.answerContent"></span>
                                                    </p>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
